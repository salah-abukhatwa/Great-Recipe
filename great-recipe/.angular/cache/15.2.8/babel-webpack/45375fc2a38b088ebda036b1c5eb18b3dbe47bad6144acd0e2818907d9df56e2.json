{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\nlet RecipeEditComponent = class RecipeEditComponent {\n  constructor(route, recipeService) {\n    this.route = route;\n    this.recipeService = recipeService;\n    this.editMod = false;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.id = +params['id'];\n      this.editMod = params['id'] != null;\n      this.initForm();\n    });\n  }\n  onSubmit() {\n    console.log(this.recipeForm);\n  }\n  initForm() {\n    let recipeName = '';\n    let recipeImagePath = '';\n    let recipeDescription = '';\n    let recipeIngrediants = new FormArray([]);\n    if (this.editMod) {\n      const recipe = this.recipeService.getRecipeById(this.id);\n      recipeName = recipe.name;\n      recipeImagePath = recipe.imagePath;\n      recipeDescription = recipe.description;\n      if (recipe['ingredients']) {\n        for (let ingredient of recipe.ingredients) {\n          recipeIngrediants.push(new FormGroup({\n            'name': new FormControl(ingredient.name, Validators.required),\n            'amount': new FormControl(ingredient.amount, [Validators.required, Validators.pattern(/^[1-9]+[0-9]*$/)])\n          }));\n        }\n      }\n    }\n    this.recipeForm = new FormGroup({\n      'name': new FormControl(recipeName, Validators.required),\n      'imageUrl': new FormControl(recipeImagePath, Validators.required),\n      'description': new FormControl(recipeDescription, Validators.required),\n      'ingredients': recipeIngrediants\n    });\n  }\n  onAddIngredient() {\n    this.recipeForm.get('ingredients').push(new FormGroup({\n      'name': new FormControl(null, Validators.required),\n      'amount': new FormControl(null, [Validators.required, Validators.pattern(/^[1-9]+[0-9]*$/)])\n    }));\n  }\n};\nRecipeEditComponent = __decorate([Component({\n  selector: 'app-recipe-edit',\n  templateUrl: './recipe-edit.component.html',\n  styleUrls: ['./recipe-edit.component.css']\n})], RecipeEditComponent);\nexport { RecipeEditComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}